<mat-toolbar class="portal-area-toolbar">
  <mat-toolbar-row>

    <mat-form-field class="toolbar-form-input">
      <mat-label>Connections</mat-label>
      <mat-select (selectionChange)="onConnectionSelected($event.value)" [value]="application.selectedConnection">
        <mat-option *ngFor="let connection of application.connections" [value]="connection">
          {{connection.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="toolbar-form-input">
      <mat-label>Action Documents</mat-label>
      <mat-select (selectionChange)="onActionLinkSelected($event.value)" [value]="currentActionDocState?.link">
        <mat-option *ngFor="let actionDocLink of application.connectionActionDocLinks" [value]="actionDocLink">
          {{actionDocLink.docQuery}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <a mat-raised-button color="primary" [disabled]="isCloseDisabled" (click)="onCloseSelectedActionDoc()">
      <span>Close</span>
      <mat-icon svgIcon="close"></mat-icon>
    </a>

    <span class="toolbar-item-spacer"></span>
    <span class="doc-path" *ngIf="actionDoc">{{actionDoc.httpMethod}} {{actionDoc.relativePath}}</span>

  </mat-toolbar-row>
</mat-toolbar>

<div class="action-doc portal-area-content">
  <dl class="portal-value-grouping" *ngIf="actionDoc">
    <dt>Action</dt>

    <!-- Resource Information -->
    <dd>
      <dl class="portal-value-list">
        <dt>Method</dt>
        <dd>{{actionDoc.httpMethod}}</dd>
        <dt>Relative Path</dt>
        <dd>{{actionDoc.relativePath}}</dd>
        <dt>Description</dt>
        <dd>{{actionDoc.description}}</dd>
      </dl>
    </dd>

    <!-- Request Parameters -->
    <ng-container *ngIf="actionDoc.routeParams.length > 0">
      <dt>Route Parameters</dt>
      <dd>
        <app-param-doc [param-list]="actionDoc.routeParams"></app-param-doc>
      </dd>
    </ng-container>

    <ng-container *ngIf="actionDoc.queryParams.length > 0">
      <dt>Query Parameters</dt>
      <dd>
        <app-param-doc [param-list]="actionDoc.queryParams"></app-param-doc>
      </dd>
    </ng-container>

    <ng-container *ngIf="actionDoc.headerParams.length > 0">
      <dt>Header Parameters</dt>
      <dd>
        <app-param-doc [param-list]="actionDoc.headerParams"></app-param-doc>
      </dd>
    </ng-container>

    <mat-divider class="divider"></mat-divider>

    <ng-container *ngIf="actionDoc.responseDocs.length > 0">
      <dt class="response-docs">Responses</dt>
      <dd style="margin-inline-start: 0">

        <div fxLayout="row" fxFill>
          <div fxLayout="column" fxFill>

            <!--  Navigation-->
            <div fxLayout="row" fxFill>

              <div fxLayout="column" fxFlex>

                <!-- Response Resource Selection -->
                <div fxLayout="row">
                  <mat-form-field class="response-list">
                    <mat-select [(value)]="selectedResponseDoc" (selectionChange)="onActionResponseSelected()">
                      <mat-option *ngFor="let item of currentActionDocState.responseItems" [value]="item.objKey">
                        {{item.displayValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <!-- Selected Resource Path -->
                <div fxLayout="row" class="resource-path">
                  <ng-container *ngFor="let resource of currentActionDocState.visitedResourceDocs">
                    <span>&#047;</span>
                    <span><a href="javascript: void(0)" (click)="onVisitedResourceSelected(resource)">{{resource.resourceName}}</a></span>
                  </ng-container>
                </div>
              </div>
            </div>

            <!--Resource Details-->
            <div fxLayout="row" fxFill>
              <div fxLayout="column" fxFill>
                <app-resource-doc [resourceDoc]="currentActionDocState.currentResourceDoc"
                      (onChildResourceSelected)="onChildResourceSelected($event)"
                      (onRelationSelected)="onNavToActionDoc($event)">
                </app-resource-doc>
              </div>
            </div>
          </div>
        </div>
      </dd>
    </ng-container>
  </dl>
</div>
